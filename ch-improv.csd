<CsoundSynthesizer>
<CsOptions>
-+rtaudio=alsa
-odac
</CsOptions>
<CsInstruments>

/*
 * "Chord Improvisation" as posted to Soundcloud January 6 2014
 */

sr = 44100
ksmps = 32
nchnls = 2
0dbfs  = 1

/**************************************************************************/

gisintbl = 1
girisetbl = 2
gisheptbl = 3
gisquaretbl = 4
gisawtbl = 5

/**************************************************************************/

instr 1

kenv expseg 0.2,0.25,1,p3-0.25,0.05
kbenv linseg 0,p3/5,1,p3*3/5,1,p3/5,0

kfilt expseg 1000,p3,5000
a1 poscil3 kenv,p4,gisawtbl,rnd(1)
a3 poscil3 kbenv*0.20,32768/p4,gisquaretbl,rnd(1)
a2 lowpass2 a1+a3,kfilt,2
outs a2*(0.17+0.03*kenv),a2*(0.12-0.03*kenv)

endin

instr 2

iscpos = log(p4/255)/log(427/256)

kenv linseg 0,iscpos*0.3*p3,0,0.1*p3, \
            1,0.5*p3,0.6,0.1*p3,0
kbenv linseg 0,p3/5,1,p3*3/5,1,p3/5,0

kmod poscil3 0.06,20,gisintbl,rnd(1)
a1 poscil3 kenv*0.25,p4*exp(kmod*kenv*log(2)/12),gisheptbl,rnd(1)
a2 poscil3 kbenv*0.07,32768/p4,gisawtbl,rnd(1)
outs (a1+a2)*iscpos,(a1+a2)*(1-iscpos)

endin

instr 3

kenv expseg 0.2,0.25,1,p3-0.25,0.05
kbenv linseg 0,p3/5,1,p3*3/5,1,p3/5,0

a1a poscil3 kenv*0.076,p4*0.996,gisquaretbl,rnd(1)
a1b poscil3 kenv*0.076,p4,gisquaretbl,rnd(1)
a1c poscil3 kenv*0.076,p4*1.004,gisquaretbl,rnd(1)
alo poscil3 kbenv*0.017,32768/p4,gisintbl,rnd(1)

aranda random 0,1
arandb1 random -1,1
arandb2 random -1,1
arandb3 random -1,1

a3 fog kenv*0.009,150,p4*2*exp((arandb1+arandb2+arandb3)*log(2)*0.04) \
                    *(ftlen(gisquaretbl)/sr),aranda, \
       0,0,0.01,0.1,0.01,200,gisquaretbl,girisetbl,p3

a2 lowpass2 a1a+a1b+a1c+alo,2048*exp(kenv*2*log(2)),1+3*kenv
a4 lowpass2 a3,2048*exp(kenv*2*log(2)),1+3*kenv

outs 0.3*a2+0.7*a4,0.7*a2+0.3*a4

endin

instr 4
endin

instr 5
endin

instr 6
endin

</CsInstruments>
<CsScore>

; plain old sine wave
f 1 0 4096 10   1

; sinusoidal rise shape for granular synthesis
f 2 0 1024 19   0.5 0.5 270 0.5

; Shepardesque tone:  octaves with exponential dropoff
f 3 0 4096 9    1 1 0        2 [1/2] 0     4 [1/4] 0   8 [1/8] 0  \
               16 [1/16] 0  32 [1/32] 0   64 [1/64] 0

; square wave (rise/fall limited a little)
f 4 0 1024 7   0 10 1 492 1 20 -1 492 -1 10 0

; nice sharp sawtooth
f 5 0 1024 7   -1 1024 1

t 0 80

i 1 1 9 256.0
i 1 1 9 320.0
i 1 1 9 384.0
i 1 9 5 256.0
i 1 9 5 320.0
i 1 9 5 384.0
i 1 13 9 256.0
i 1 13 9 284.444
i 1 13 9 320.0
i 1 21 5 256.0
i 1 21 5 320.0
i 1 21 5 384.0
i 1 25 9 284.444
i 1 25 9 320.0
i 1 25 9 384.0
i 1 33 9 256.0
i 1 33 9 320.0
i 1 33 9 384.0
i 1 41 3 256.0
i 1 41 3 320.0
i 1 41 3 384.0
i 1 43 3 320.0
i 1 43 3 384.0
i 1 43 3 426.667
i 1 45 9 256.0
i 1 45 9 320.0
i 1 45 9 384.0
i 1 53 5 256.0
i 1 53 5 320.0
i 1 53 5 384.0
i 1 57 2 256.0
i 1 57 2 320.0
i 1 57 2 384.0
i 1 57 2 426.667
i 1 58 2 256.0
i 1 58 2 320.0
i 1 58 2 426.667
i 1 59 3 307.2
i 1 59 3 320.0
i 1 59 3 426.667
i 1 61 5 256.0
i 1 61 5 307.2
i 1 61 5 320.0
i 1 61 5 426.667
i 1 65 2 256.0
i 1 65 2 307.2
i 1 65 2 320.0
i 1 66 2 256.0
i 1 66 2 284.444
i 1 66 2 320.0
i 1 67 2 256.0
i 1 67 2 284.444
i 1 67 2 320.0
i 1 67 2 426.667
i 1 68 2 256.0
i 1 68 2 284.444
i 1 68 2 320.0
i 1 68 2 384.0
i 1 69 9 284.444
i 1 69 9 320.0
i 1 69 9 384.0
i 1 77 5 256.0
i 1 77 5 320.0
i 1 77 5 384.0
i 1 81 9 284.444
i 1 81 9 320.0
i 1 81 9 384.0
i 1 89 5 256.0
i 1 89 5 320.0
i 1 89 5 384.0
i 1 93 9 256.0
i 1 93 9 284.444
i 1 93 9 320.0
i 1 101 5 256.0
i 1 101 5 320.0
i 1 101 5 384.0
i 1 105 9 256.0
i 1 105 9 320.0
i 1 105 9 426.667
i 1 113 3 256.0
i 1 113 3 320.0
i 1 113 3 384.0
i 1 115 2 320.0
i 1 115 2 384.0
i 1 115 2 426.667
i 1 116 2 284.444
i 1 116 2 320.0
i 1 116 2 384.0
i 1 116 2 426.667
i 1 117 9 284.444
i 1 117 9 320.0
i 1 117 9 384.0
i 1 125 5 256.0
i 1 125 5 320.0
i 1 125 5 384.0
i 1 129 9 256.0
i 1 129 9 284.444
i 1 129 9 384.0
i 1 137 2 256.0
i 1 137 2 320.0
i 1 137 2 384.0
i 1 138 2 256.0
i 1 138 2 307.2
i 1 138 2 384.0
i 1 139 3 256.0
i 1 139 3 284.444
i 1 139 3 307.2
i 1 139 3 320.0
i 1 139 3 384.0
i 1 141 9 256.0
i 1 141 9 307.2
i 1 141 9 384.0
i 1 149 3 256.0
i 1 149 3 320.0
i 1 149 3 384.0
i 1 151 2 256.0
i 1 151 2 284.444
i 1 151 2 320.0
i 1 151 2 384.0
i 1 152 2 256.0
i 1 152 2 320.0
i 1 152 2 384.0
i 1 152 2 426.667
i 1 153 9 320.0
i 1 153 9 384.0
i 1 153 9 426.667
i 1 161 3 256.0
i 1 161 3 320.0
i 1 161 3 384.0
i 1 163 2 256.0
i 1 163 2 307.2
i 1 163 2 384.0
i 1 164 2 256.0
i 1 164 2 320.0
i 1 164 2 384.0
i 1 165 9 320.0
i 1 165 9 384.0
i 1 165 9 426.667
i 1 173 5 256.0
i 1 173 5 320.0
i 1 173 5 384.0
i 1 177 9 256.0
i 1 177 9 284.444
i 1 177 9 320.0
i 1 185 5 256.0
i 1 185 5 320.0
i 1 185 5 384.0
i 1 189 9 256.0
i 1 189 9 320.0
i 1 189 9 426.667
i 2 197 9 256.0
i 2 197 9 320.0
i 2 197 9 384.0
i 2 205 5 256.0
i 2 205 5 320.0
i 2 205 5 384.0
i 2 209 9 256.0
i 2 209 9 320.0
i 2 209 9 426.667
i 2 217 5 256.0
i 2 217 5 320.0
i 2 217 5 384.0
i 2 221 9 256.0
i 2 221 9 384.0
i 2 221 9 426.667
i 2 229 2 256.0
i 2 229 2 320.0
i 2 229 2 384.0
i 2 230 2 256.0
i 2 230 2 320.0
i 2 230 2 426.667
i 2 231 3 256.0
i 2 231 3 320.0
i 2 231 3 384.0
i 2 233 2 256.0
i 2 233 2 384.0
i 2 233 2 426.667
i 2 234 2 284.444
i 2 234 2 384.0
i 2 234 2 426.667
i 2 235 3 284.444
i 2 235 3 320.0
i 2 235 3 384.0
i 2 235 3 426.667
i 2 237 5 284.444
i 2 237 5 384.0
i 2 237 5 426.667
i 2 241 5 256.0
i 2 241 5 284.444
i 2 241 5 384.0
i 2 241 5 426.667
i 2 245 9 284.444
i 2 245 9 384.0
i 2 245 9 426.667
i 2 253 9 256.0
i 2 253 9 320.0
i 2 253 9 384.0
i 2 261 5 256.0
i 2 261 5 320.0
i 2 261 5 384.0
i 2 265 9 256.0
i 2 265 9 320.0
i 2 265 9 426.667
i 2 273 5 256.0
i 2 273 5 320.0
i 2 273 5 384.0
i 2 277 5 256.0
i 2 277 5 320.0
i 2 277 5 384.0
i 2 277 5 426.667
i 2 281 2 256.0
i 2 281 2 320.0
i 2 281 2 341.333
i 2 281 2 426.667
i 2 282 2 256.0
i 2 282 2 284.444
i 2 282 2 320.0
i 2 282 2 341.333
i 2 283 3 256.0
i 2 283 3 284.444
i 2 283 3 320.0
i 2 283 3 426.667
i 2 285 5 256.0
i 2 285 5 284.444
i 2 285 5 341.333
i 2 285 5 426.667
i 2 289 9 256.0
i 2 289 9 284.444
i 2 289 9 341.333
i 2 297 3 256.0
i 2 297 3 320.0
i 2 297 3 384.0
i 2 299 3 256.0
i 2 299 3 284.444
i 2 299 3 320.0
i 2 301 9 284.444
i 2 301 9 320.0
i 2 301 9 426.667
i 2 309 5 256.0
i 2 309 5 320.0
i 2 309 5 384.0
i 2 313 9 256.0
i 2 313 9 284.444
i 2 313 9 384.0
i 2 321 5 256.0
i 2 321 5 320.0
i 2 321 5 384.0
i 2 325 5 284.444
i 2 325 5 320.0
i 2 325 5 384.0
i 2 329 5 284.444
i 2 329 5 320.0
i 2 329 5 341.333
i 2 329 5 384.0
i 2 333 5 284.444
i 2 333 5 320.0
i 2 333 5 341.333
i 2 337 5 256.0
i 2 337 5 320.0
i 2 337 5 341.333
i 2 341 5 256.0
i 2 341 5 320.0
i 2 341 5 341.333
i 2 341 5 384.0
i 2 345 5 320.0
i 2 345 5 341.333
i 2 345 5 384.0
i 2 349 2 256.0
i 2 349 2 320.0
i 2 349 2 384.0
i 2 350 2 256.0
i 2 350 2 284.444
i 2 350 2 320.0
i 2 350 2 384.0
i 2 351 3 256.0
i 2 351 3 284.444
i 2 351 3 341.333
i 2 351 3 384.0
i 2 353 5 256.0
i 2 353 5 284.444
i 2 353 5 384.0
i 2 357 5 256.0
i 2 357 5 284.444
i 2 357 5 384.0
i 2 357 5 426.667
i 2 361 9 256.0
i 2 361 9 384.0
i 2 361 9 426.667
i 2 369 5 256.0
i 2 369 5 320.0
i 2 369 5 384.0
i 2 373 9 256.0
i 2 373 9 320.0
i 2 373 9 341.333
i 2 381 5 256.0
i 2 381 5 320.0
i 2 381 5 384.0
i 2 385 9 256.0
i 2 385 9 384.0
i 2 385 9 426.667
i 3 393 9 256.0
i 3 393 9 341.333
i 3 393 9 384.0
i 3 401 5 256.0
i 3 401 5 341.333
i 3 401 5 384.0
i 3 405 9 256.0
i 3 405 9 384.0
i 3 405 9 426.667
i 3 413 3 256.0
i 3 413 3 341.333
i 3 413 3 384.0
i 3 415 2 256.0
i 3 415 2 284.444
i 3 415 2 341.333
i 3 415 2 384.0
i 3 416 2 284.444
i 3 416 2 341.333
i 3 416 2 384.0
i 3 417 9 256.0
i 3 417 9 284.444
i 3 417 9 341.333
i 3 425 3 256.0
i 3 425 3 341.333
i 3 425 3 384.0
i 3 427 3 341.333
i 3 427 3 384.0
i 3 427 3 426.667
i 3 429 5 284.444
i 3 429 5 384.0
i 3 429 5 426.667
i 3 433 5 256.0
i 3 433 5 284.444
i 3 433 5 384.0
i 3 433 5 426.667
i 3 437 3 256.0
i 3 437 3 284.444
i 3 437 3 341.333
i 3 437 3 384.0
i 3 439 3 256.0
i 3 439 3 284.444
i 3 439 3 341.333
i 3 439 3 426.667
i 3 441 9 256.0
i 3 441 9 284.444
i 3 441 9 426.667
i 3 449 9 256.0
i 3 449 9 341.333
i 3 449 9 384.0
i 3 457 2 256.0
i 3 457 2 341.333
i 3 457 2 384.0
i 3 458 2 256.0
i 3 458 2 284.444
i 3 458 2 341.333
i 3 459 3 284.444
i 3 459 3 341.333
i 3 459 3 355.556
i 3 461 9 284.444
i 3 461 9 341.333
i 3 461 9 384.0
i 3 469 5 256.0
i 3 469 5 341.333
i 3 469 5 384.0
i 3 473 9 256.0
i 3 473 9 284.444
i 3 473 9 341.333
i 3 481 5 256.0
i 3 481 5 341.333
i 3 481 5 384.0
i 3 485 9 256.0
i 3 485 9 355.556
i 3 485 9 384.0
i 3 493 3 256.0
i 3 493 3 341.333
i 3 493 3 384.0
i 3 495 3 256.0
i 3 495 3 341.333
i 3 495 3 355.556
i 3 495 3 384.0
i 3 497 9 256.0
i 3 497 9 341.333
i 3 497 9 384.0
i 3 505 5 256.0
i 3 505 5 341.333
i 3 505 5 384.0
i 3 509 9 256.0
i 3 509 9 284.444
i 3 509 9 341.333
i 3 517 5 256.0
i 3 517 5 341.333
i 3 517 5 384.0
i 3 521 9 256.0
i 3 521 9 341.333
i 3 521 9 426.667
i 3 529 2 256.0
i 3 529 2 341.333
i 3 529 2 384.0
i 3 530 2 256.0
i 3 530 2 284.444
i 3 530 2 341.333
i 3 530 2 384.0
i 3 531 3 284.444
i 3 531 3 341.333
i 3 531 3 384.0
i 3 531 3 426.667
i 3 533 9 284.444
i 3 533 9 341.333
i 3 533 9 426.667
i 3 541 3 256.0
i 3 541 3 341.333
i 3 541 3 384.0
i 3 543 2 341.333
i 3 543 2 384.0
i 3 543 2 426.667
i 3 544 2 256.0
i 3 544 2 341.333
i 3 544 2 426.667
i 3 545 5 256.0
i 3 545 5 341.333
i 3 545 5 355.556
i 3 549 2 256.0
i 3 549 2 284.444
i 3 549 2 355.556
i 3 550 2 256.0
i 3 550 2 355.556
i 3 550 2 384.0
i 3 551 2 256.0
i 3 551 2 355.556
i 3 551 2 426.667
i 3 552 2 256.0
i 3 552 2 284.444
i 3 552 2 355.556
i 3 552 2 426.667
i 3 553 5 256.0
i 3 553 5 284.444
i 3 553 5 426.667
i 3 557 9 256.0
i 3 557 9 284.444
i 3 557 9 341.333
i 3 565 5 256.0
i 3 565 5 341.333
i 3 565 5 384.0
i 3 569 9 341.333
i 3 569 9 355.556
i 3 569 9 384.0
i 3 577 5 256.0
i 3 577 5 341.333
i 3 577 5 384.0
i 3 581 9 341.333
i 3 581 9 384.0
i 3 581 9 426.667
i 3 589 5 256.0
i 3 589 5 341.333
i 3 589 5 384.0
i 3 593 9 256.0
i 3 593 9 384.0
i 3 593 9 426.667
i 3 601 5 256.0
i 3 601 5 341.333
i 3 601 5 384.0
i 3 605 2 256.0
i 3 605 2 341.333
i 3 605 2 355.556
i 3 605 2 384.0
i 3 606 2 341.333
i 3 606 2 355.556
i 3 606 2 384.0
i 3 606 2 426.667
i 3 607 3 341.333
i 3 607 3 384.0
i 3 607 3 426.667
i 3 609 3 256.0
i 3 609 3 284.444
i 3 609 3 341.333
i 3 609 3 384.0
i 3 609 3 426.667
i 3 611 2 256.0
i 3 611 2 341.333
i 3 611 2 384.0
i 3 611 2 426.667
i 3 612 2 256.0
i 3 612 2 384.0
i 3 612 2 426.667
i 3 613 5 256.0
i 3 613 5 284.444
i 3 613 5 384.0
i 3 613 5 426.667
i 3 617 9 256.0
i 3 617 9 284.444
i 3 617 9 426.667
i 3 625 9 256.0
i 3 625 9 320.0
i 3 625 9 384.0
i 4 1 204
i 5 197 204
i 6 393 248

e
</CsScore>
</CsoundSynthesizer>
